{% extends 'layout.html' %}

{% block content %}
<a href="/" class="back-link">‚Üê Volver a la App</a>

<!-- GESTIONAR RRPP -->
<div class="admin-panel">
    <h3 class="admin-title">Agregar RRPP</h3>
    <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="tipo" value="add_rrpp">
        
        <!-- Fila Orden + Localidad (DISE√ëO MEJORADO) -->
        <div style="display:flex; gap: 15px; margin-bottom: 5px;">
            <div style="width: 80px;">
                <label style="font-size: 12px; color: #aaa;">Orden</label>
                <input type="number" name="orden" value="99" style="text-align: center; padding: 12px 5px;">
            </div>
            <div style="flex: 1;">
                <label style="font-size: 12px; color: #aaa;">Localidad</label>
                <input type="text" name="localidad" placeholder="Ej: Arenales" required>
            </div>
        </div>

        <label style="font-size: 12px; color: #aaa;">Nombre</label>
        <input type="text" name="nombre" placeholder="Nombre Vendedor" required>
        
        <!-- FOTO DUAL -->
        <label style="font-size:12px; color:#aaa; margin-top:10px; display:block;">FOTO: Sube archivo O pega link</label>
        <input type="file" name="foto" accept="image/*" style="padding:5px;">
        <input type="text" name="foto_url" placeholder="https://instagram.com/...">
        
        <input type="text" name="instagram" placeholder="Usuario Instagram" required>
        <input type="text" name="whatsapp" placeholder="N√∫mero WhatsApp" required>
        <button type="submit">Guardar RRPP</button>
    </form>
</div>

<!-- LISTA RRPP -->
<div class="admin-panel">
    <h3 class="admin-title">Lista de RRPP</h3>
    <table>
        <thead><tr><th>#</th><th>Nombre</th><th style="text-align:right;">Acciones</th></tr></thead>
        <tbody>
            {% for r in rrpps %}
            <tr style="opacity: {% if r.visible %}1{% else %}0.5{% endif %};">
                <td style="color:var(--primary-green); font-weight:bold;">{{ r.orden }}</td>
                <td>
                    <div style="font-weight:bold;">{{ r.nombre }}</div>
                    <div style="font-size:10px;">{{ r.localidad }}</div>
                </td>
                <td style="text-align:right; display:flex; justify-content:flex-end; gap:5px;">
                    <a href="{{ url_for('edit_rrpp', id=r.id) }}" style="background:#4a90e2; color:white; padding:5px 10px; border-radius:5px; text-decoration:none; font-size:10px; font-weight:bold;">EDIT</a>
                    <form method="POST" style="margin:0;">
                        <input type="hidden" name="tipo" value="toggle">
                        <input type="hidden" name="tabla" value="rrpp">
                        <input type="hidden" name="id" value="{{ r.id }}">
                        <button type="submit" style="background:{% if r.visible %}#f0ad4e{% else %}#999{% endif %}; width:auto; padding:5px 10px; font-size:10px; margin:0;">üëÅÔ∏è</button>
                    </form>
                    <form method="POST" style="margin:0;">
                        <input type="hidden" name="tipo" value="delete">
                        <input type="hidden" name="tabla" value="rrpp">
                        <input type="hidden" name="id" value="{{ r.id }}">
                        <button type="submit" class="btn-danger" style="width:auto; padding:5px 10px; font-size:10px; margin:0;">X</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- GESTIONAR TRANSPORTES -->
<div class="admin-panel">
    <h3 class="admin-title">Agregar Transporte</h3>
    <form method="POST">
        <input type="hidden" name="tipo" value="add_transporte">
        
        <!-- Fila Orden + Ciudad (DISE√ëO MEJORADO) -->
        <div style="display:flex; gap: 15px; margin-bottom: 5px;">
            <div style="width: 80px;">
                <label style="font-size: 12px; color: #aaa;">Orden</label>
                <input type="number" name="orden" value="99" style="text-align: center; padding: 12px 5px;">
            </div>
            <div style="flex: 1;">
                <label style="font-size: 12px; color: #aaa;">Ciudad</label>
                <input type="text" name="ciudad" placeholder="Ciudad Agrupadora" required>
            </div>
        </div>

        <label style="font-size: 12px; color: #aaa;">Nombre Empresa</label>
        <input type="text" name="nombre_taxi" placeholder="Ej: Radio Taxi" required>
        
        <input type="text" name="dueno" placeholder="Nombre Due√±o" required>
        <input type="text" name="descripcion" placeholder="Descripci√≥n" required>
        <input type="text" name="precio" placeholder="Precio" required>
        <input type="text" name="whatsapp" placeholder="N√∫mero WhatsApp" required>
        <button type="submit">Guardar Transporte</button>
    </form>
</div>

<!-- LISTA TRANSPORTES -->
<div class="admin-panel">
    <h3 class="admin-title">Lista de Transportes</h3>
    <table>
        <thead><tr><th>#</th><th>Info</th><th style="text-align:right;">Acciones</th></tr></thead>
        <tbody>
            {% for t in transportes %}
            <tr style="opacity: {% if t.visible %}1{% else %}0.5{% endif %};">
                <td style="color:var(--primary-green); font-weight:bold;">{{ t.orden }}</td>
                <td>
                    <div style="font-weight:bold;">{{ t.nombre_taxi }}</div>
                    <div style="font-size:10px;">{{ t.ciudad }}</div>
                </td>
                <td style="text-align:right; display:flex; justify-content:flex-end; gap:5px;">
                    <a href="{{ url_for('edit_transporte', id=t.id) }}" style="background:#4a90e2; color:white; padding:5px 10px; border-radius:5px; text-decoration:none; font-size:10px; font-weight:bold;">EDIT</a>
                    <form method="POST" style="margin:0;">
                        <input type="hidden" name="tipo" value="toggle">
                        <input type="hidden" name="tabla" value="transporte">
                        <input type="hidden" name="id" value="{{ t.id }}">
                        <button type="submit" style="background:{% if t.visible %}#f0ad4e{% else %}#999{% endif %}; width:auto; padding:5px 10px; font-size:10px; margin:0;">üëÅÔ∏è</button>
                    </form>
                    <form method="POST" style="margin:0;">
                        <input type="hidden" name="tipo" value="delete">
                        <input type="hidden" name="tabla" value="transporte">
                        <input type="hidden" name="id" value="{{ t.id }}">
                        <button type="submit" class="btn-danger" style="width:auto; padding:5px 10px; font-size:10px; margin:0;">X</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- CONFIGURACI√ìN DE TEXTOS -->
<div class="admin-panel">
    <h3 class="admin-title">Configuraci√≥n General</h3>
    <form method="POST">
        <input type="hidden" name="tipo" value="config_textos">
        
        <label>Texto Debajo del Logo</label>
        <textarea name="texto_header" rows="2" required>{{ config.texto_header }}</textarea>
        
        <label>Texto Actualizaci√≥n</label>
        <textarea name="texto_actualizacion" rows="3" required>{{ config.texto_actualizacion }}</textarea>
        
        <label>Texto Footer</label>
        <textarea name="texto_footer" rows="2" required>{{ config.texto_footer }}</textarea>
        
        <button type="submit">Actualizar Textos</button>
    </form>
</div>

{% endblock %}